<div class="user-edit-container">
    <div *ngIf="isUpdating(); then updating else updateForm"></div>
    <ng-template #updateForm>
        <form [formGroup]="form">
            <table class="user-edit">
                <tr class="edit-headers">
                    <th i18n="Current|">Aktualne</th>
                    <th i18n="New|">Nowe</th>
                </tr>

                <tr class="edit-content">
                    <td>
                        <label for="edit-firstName">{{accountDetailsService.account.firstName}}</label>
                    </td>
                    <td>
                        <input #newFirstName type="text" id="edit-firstName" formControlName="firstName"
                               placeholder="Imię" i18n-placeholder="First name|"/>
                    </td>
                </tr>

                <tr class="edit-content">
                    <td>
                        <label for="edit-lastName">{{accountDetailsService.account.lastName}}</label>
                    </td>
                    <td>
                        <input #newLastName type="text" id="edit-lastName" formControlName="lastName"
                               placeholder="Nazwisko" i18n-placeholder="Last name|"/>
                    </td>
                </tr>

                <tr class="edit-content">
                    <td>
                        <label for="edit-phoneNumber">{{accountDetailsService.account.phoneNumber}}</label>
                    </td>
                    <td>
                        <input #newPhoneNumber type="text" id="edit-phoneNumber" formControlName="phoneNumber"
                               placeholder="Numer telefonu" i18n-placeholder="Phone number|"
                               [ngClass]="{'is-invalid': form.controls.phoneNumber.touched && form.controls.phoneNumber.invalid}">
                        <div class="edit-validation-error" *ngIf="form.controls.phoneNumber.hasError('pattern') && form.controls.phoneNumber.touched"
                             i18n="Invalid format|">Niepoprawny format</div>
                    </td>
                </tr>

                <tr class="edit-content">
                    <td>
                        <label for="edit-language">{{accountDetailsService.account.language}}</label>
                    </td>
                    <td>
                        <select class="edit-content-select" #newLanguage id="edit-language" formControlName="language">
                            <option id="pl" [selected]="accountDetailsService.account.language === 'pl'" value="pl" i18n="Polish language|">język polski</option>
                            <option id="en" [selected]="accountDetailsService.account.language === 'en'" value="en" i18n="English language|">język angielski</option>
                        </select>
                    </td>
                </tr>

                <tr class="edit-content">
                    <td>
                        <label for="edit-timeZone">{{accountDetailsService.account.timeZone}}</label>
                    </td>
                    <td>
                        <select class="edit-content-select" #newTimeZone id="edit-timeZone">
                            <option *ngFor="let zone of timezones" [value]="zone" [selected]="zone === accountDetailsService.account.timeZone" id="{{zone}}">Strefa {{zone}}</option>
                        </select>
                    </td>
                </tr>
            </table>
            <button class="edit-button" id="saveBtn"
                    (click)="editUser(newFirstName.value, newLastName.value, newPhoneNumber.value, newLanguage.value, newTimeZone.value)"
                    [disabled]="form.invalid" i18n="Save|">Zapisz</button>
        </form>
    </ng-template>
    <ng-template #updating>
        <div class="updating-text" i18n="Updating|">
            Aktualizowanie...
        </div>
    </ng-template>
</div>
