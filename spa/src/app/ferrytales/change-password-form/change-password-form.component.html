<div class="overlay">
    <div class="change-password-form-container">
        <form id="change-password-form" class="change-password-form" action="" [formGroup]="form">
            <div class="logo" i18n="Set new password|">Ustal nowe hasło:</div>

            <label for="old-password"></label>
            <input #oldPassword type="password" id="old-password" name="OldPassword"
                   placeholder="*Hasło" i18n-placeholder="Password|" formControlName="oldPassword"
                   [ngClass]="{'is-invalid': form.controls.oldPassword.touched && form.controls.oldPassword.invalid}"
                   (ngModelChange)="incorrectPassword = false"><br>
            <div class="validation-error" *ngIf="form.controls.oldPassword.hasError('required')
                && form.controls.oldPassword.touched" i18n="Field required|">Pole wymagane
            </div>
            <div class="validation-error" *ngIf="incorrectPassword">
                <p id="invalid-password-error" i18n="Invalid password|">Podane hasło jest nieprawidłowe.</p>
            </div>

            <label for="new-password"></label>
            <input #newPassword type="password" id="new-password" name="Password"
                   placeholder="*Nowe hasło" i18n-placeholder="New password|" formControlName="password"
                   [ngClass]="{'is-invalid': form.controls.password.touched && form.controls.password.invalid}"
                   (ngModelChange)="samePassword = false"><br>
            <div class="validation-error"
                 *ngIf="form.controls.password.hasError('required') && form.controls.password.touched"
                 i18n="Field required|">Pole wymagane
            </div>
            <div id="short-password-error" class="validation-error"
                 *ngIf="form.controls.password.hasError('minlength') && form.controls.password.touched"
                 i18n="Short password|">Hasło za krótkie
            </div>
            <div class="validation-error" *ngIf="samePassword">
                <p id="same-password-error" i18n="Same password|">Podane hasło jest takie samo jak wcześniejsze.</p>
            </div>

            <label for="new-password-repeat"></label>
            <input type="password" id="new-password-repeat" appConfirmEqualValidator="password" name="PasswordRepeat"
                   placeholder="*Powtórz nowe hasło" i18n-placeholder="Repeat new password|"
                   formControlName="passwordRepeat"
                   [ngClass]="{'is-invalid': form.controls.passwordRepeat.touched && form.controls.passwordRepeat.invalid}"><br>
            <div id="different-passwords-error" class="validation-error" *ngIf="form.controls.passwordRepeat.hasError('notMatching')
                && !form.controls.passwordRepeat.hasError('required') && form.controls.passwordRepeat.touched"
                 i18n="Passwords differ|">Hasła nie są takie same
            </div>
            <div class="validation-error"
                 *ngIf="form.controls.passwordRepeat.hasError('required') && form.controls.passwordRepeat.touched"
                 i18n="Field required|">Pole wymagane
            </div>
            <br>

            <button id="confirm" class="form-button" (click)="changePassword(oldPassword.value, newPassword.value)"
                    [disabled]="form.invalid" i18n="Confirm|">Potwierdź
            </button>
            <img class="return-arrow" (click)="closeComponent()" src="assets/back-arrow.png" alt=""/>
        </form>
    </div>
</div>

