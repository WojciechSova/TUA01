<div class="overlay">
    <div class="change-password-form-container">
        <form id="change-password-form" class="change-password-form" action="" [formGroup]="form">
            <div class="logo" translate>change-password-form.set_new_password</div>

            <label for="old-password"></label>
            <input #oldPassword type="password" id="old-password" name="OldPassword"
                   placeholder="{{'form.required_password' | translate}}" formControlName="oldPassword"
                   [ngClass]="{'is-invalid': form.controls.oldPassword.touched && form.controls.oldPassword.invalid}"
                   (ngModelChange)="incorrectPassword = false"><br>
            <div class="validation-error" *ngIf="form.controls.oldPassword.hasError('required')
                && form.controls.oldPassword.touched" translate>form.field_required
            </div>
            <div class="validation-error" *ngIf="incorrectPassword">
                <p id="invalid-password-error" translate>change-password-form.invalid_password</p>
            </div>

            <label for="new-password"></label>
            <input #newPassword type="password" id="new-password" name="Password"
                   placeholder="{{'change-password-form.required_new_password' | translate}}" formControlName="password"
                   [ngClass]="{'is-invalid': form.controls.password.touched && form.controls.password.invalid}"
                   (ngModelChange)="samePassword = false"><br>
            <div class="validation-error"
                 *ngIf="form.controls.password.hasError('required') && form.controls.password.touched"
                 translate>form.field_required
            </div>
            <div id="short-password-error" class="validation-error"
                 *ngIf="form.controls.password.hasError('minlength') && form.controls.password.touched"
                 translate>form.short_password
            </div>
            <div class="validation-error" *ngIf="samePassword">
                <p id="same-password-error" translate>ERROR.SAME_PASSWORD_AS_PREVIOUS</p>
            </div>

            <label for="new-password-repeat"></label>
            <input type="password" id="new-password-repeat" appConfirmEqualValidator="password" name="PasswordRepeat"
                   placeholder="{{'change-password-form.required_repeat_new_password' | translate}}"
                   formControlName="passwordRepeat"
                   [ngClass]="{'is-invalid': form.controls.passwordRepeat.touched && form.controls.passwordRepeat.invalid}"><br>
            <div id="different-passwords-error" class="validation-error" *ngIf="form.controls.passwordRepeat.hasError('notMatching')
                && !form.controls.passwordRepeat.hasError('required') && form.controls.passwordRepeat.touched"
                 translate>form.passwords_differ
            </div>
            <div class="validation-error"
                 *ngIf="form.controls.passwordRepeat.hasError('required') && form.controls.passwordRepeat.touched"
                 translate>form.field_required
            </div>
            <br>

            <button id="confirm" class="form-button" (click)="changePassword(oldPassword.value, newPassword.value)"
                    [disabled]="form.invalid" translate>form.confirm
            </button>
            <img class="return-arrow" (click)="closeComponent()" src="../../../assets/imgs/back-arrow.png" alt=""/>
        </form>
    </div>
</div>

